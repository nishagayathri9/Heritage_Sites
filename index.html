<script>
  function openTab(tabId, event) {
    // Hide all tab content
    const tabContents = document.querySelectorAll('.tab-content');
    tabContents.forEach(content => content.classList.remove('active'));

    // Remove active class from all tabs
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => tab.classList.remove('active'));

    // Show the clicked tab content and activate the tab
    document.getElementById(tabId).classList.add('active');
    event.target.classList.add('active');

    // Load chart4.json into Tab 1 when it is clicked
    if (tabId === 'tab1') {
      const chartContainer = document.getElementById('chart1');

      // Clear container to prevent any previous content from interfering
      while (chartContainer.firstChild) {
        chartContainer.removeChild(chartContainer.firstChild);
      }

      // Embed chart only if not already loaded
      fetch('https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/refs/heads/main/chart4.json')
        .then(response => response.json())
        .then(spec => {
          // Modify the spec to include autosize and width/height settings
          spec.width = 'container';
          spec.height = 'container';
          spec.autosize = { type: 'fit', contains: 'padding' };

          vegaEmbed('#chart1', spec, {
            renderer: 'canvas',
            actions: false
          }).catch(console.error);
        })
        .catch(console.error);
    }

    // Load chart5.json into Tab 2 when it is clicked
    if (tabId === 'tab2') {
      const chartContainer = document.getElementById('chart2');

      // Clear container to prevent any previous content from interfering
      while (chartContainer.firstChild) {
        chartContainer.removeChild(chartContainer.firstChild);
      }

      // Embed chart only if not already loaded
      fetch('https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/refs/heads/main/chart5.json')
        .then(response => response.json())
        .then(spec => {
          // Modify the spec to include autosize and width/height settings
          spec.width = 'container';
          spec.height = 'container';
          spec.autosize = { type: 'fit', contains: 'padding' };

          vegaEmbed('#chart2', spec, {
            renderer: 'canvas',
            actions: false
          }).catch(console.error);
        })
        .catch(console.error);
    }
  }
</script>
