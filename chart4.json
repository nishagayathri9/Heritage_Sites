{
    "$schema": "https://vega.github.io/schema/vega/v5.json",
    "description": "A beeswarm chart using a force-directed layout to group world heritage sites by category.",
    "width": 1000,
    "height": 300,
    "padding": {"left": 5, "right": 5, "top": 60, "bottom": 50},
    "autosize": "none",
  
    "signals": [
      { "name": "cx", "update": "width / 2" },
      { "name": "cy", "update": "height / 2" },
      { "name": "radius", "value": 7 },
      { "name": "collide", "value": 2 },
      { "name": "gravityX", "value": 0.3 },
      { "name": "gravityY", "value": 0.61 },
      { "name": "static", "value": false }
    ],
  
    "data": [
      {
        "name": "heritage_sites",
        "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/beeswarm.csv",
        "format": {"type": "csv"}
      }
    ],
  
    "scales": [
      {
        "name": "xscale",
        "type": "band",
        "domain": {"data": "heritage_sites", "field": "category", "sort": true},
        "range": "width"
      },
      {
        "name": "color",
        "type": "ordinal",
        "domain": {"data": "heritage_sites", "field": "region_en"},
        "range": {"scheme": "category20c"}
      }
    ],
  
    "axes": [
      {
        "orient": "bottom", 
        "scale": "xscale", 
        "title": "Categories", 
        "labelFontSize": 14,
        "titleFontSize": 16,
        "titlePadding": 11
      }
    ],
  
    "marks": [
      {
        "name": "nodes",
        "type": "symbol",
        "from": {"data": "heritage_sites"},
        "encode": {
          "enter": {
            "fill": {"scale": "color", "field": "region_en"},
            "xfocus": {"scale": "xscale", "field": "category", "band": 0.5},
            "yfocus": {"signal": "cy"}
          },
          "update": {
            "size": {"signal": "pow(2 * radius, 2)"},
            "stroke": {"value": "white"},
            "strokeWidth": {"value": 1},
            "zindex": {"value": 0}
          },
          "hover": {
            "stroke": {"value": "purple"},
            "strokeWidth": {"value": 3},
            "zindex": {"value": 1}
          }
        },
        "transform": [
          {
            "type": "force",
            "iterations": 300,
            "static": {"signal": "static"},
            "forces": [
              {"force": "collide", "iterations": {"signal": "collide"}, "radius": {"signal": "radius"}},
              {"force": "x", "x": "xfocus", "strength": {"signal": "gravityX"}},
              {"force": "y", "y": "yfocus", "strength": {"signal": "gravityY"}}
            ]
          }
        ]
      },
      {
        "type": "group",
        "encode": {
          "enter": {
            "x": {"value": 800},
            "y": {"value": 20}
          }
        },
        "marks": [
          {
            "type": "rect",
            "encode": {
              "enter": {
                "x": {"value": 0},
                "y": {"field": "y"},
                "width": {"value": 15},
                "height": {"value": 15},
                "fill": {"field": "color"}
              }
            }
          },
          {
            "type": "text",
            "encode": {
              "enter": {
                "x": {"value": 20},
                "y": {"field": "y", "offset": 12},
                "text": {"field": "label"},
                "fontSize": {"value": 12}
              }
            }
          }
        ],
        "data": [
          {"name": "legend_data", "values": [
            {"y": 0, "color": "#3182bd", "label": "Region 1"},
            {"y": 20, "color": "#6baed6", "label": "Region 2"},
            {"y": 40, "color": "#9ecae1", "label": "Region 3"}
          ]}
        ]
      }
    ],
  
    "title": {
      "text": "World Heritage Sites Grouped by Category",
      "fontSize": 20,
      "anchor": "middle",
      "offset": 20
    }
  }
