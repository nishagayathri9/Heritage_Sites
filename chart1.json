{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 800,
  "height": 400,
  "background": "null",
  "layer": [
    {
      "mark": {
        "type": "geoshape",
        "fill": "lightblue"
      },
      "data": {
        "sphere": true
      },
      "projection": {
        "type": "equalEarth"
      }
    },
    {
      "mark": {
        "type": "geoshape",
        "stroke": "gray",
        "strokeWidth": 0.5
      },
      "data": {
        "graticule": true
      },
      "projection": {
        "type": "equalEarth"
      }
    },
    {
      "mark": {
        "type": "geoshape",
        "stroke": "white",
        "strokeWidth": 0.8
      },
      "projection": {
        "type": "equalEarth"
      },
      "data": {
        "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/ne_110m.json",
        "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
      },
      "transform": [
        {
          "lookup": "properties.NAME",
          "from": {
            "data": {
              "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/whc-sites-2023-site-count.csv"
            },
            "key": "states_name_en",
            "fields": ["count"]
          }
        },
        {
          "calculate": "datum.count == null ? 0 : datum.count",
          "as": "adjusted_count"
        },
        {
          "calculate": "datum.adjusted_count == 0 ? 0 : datum.adjusted_count",
          "as": "display_count"
        },
        {
          "calculate": "datum.display_count == 0 ? 'None' : datum.display_count > 40 ? 'More than 40' : datum.display_count > 25 ? '26-40' : datum.display_count > 10 ? '11-25' : '1-10'",
          "as": "class_count"
        }
      ],
      "encoding": {
        "color": {
          "field": "class_count",
          "type": "nominal",
          "scale": {
            "domain": ["None", "1-10", "11-25", "26-40", "More than 40"],
            "range": ["#ffffb2", "#fecc5c", "#fd8d3c", "#f03b20", "#bd0026"]
          },
          "legend": {
            "title": "Heritage Site Classes",
            "labelFontSize": 14,
            "titleFontSize" : 16,
            "symbolType": "square",
            "labelColor": "white",
            "titleColor": "white",
            "orient": "top",
            "direction": "horizontal",
            "legendX": 200,
            "legendY": -40
          }
        },
        "tooltip": [
          {"field": "properties.NAME", "type": "nominal", "title": "Country"},
          {"field": "display_count", "type": "quantitative", "title": "Number of Sites"}
        ]
      }
    },
    {
      "mark": {
        "type": "image",
        "width": 30,
        "height": 30
      },
      "encoding": {
        "longitude": {"field": "longitude", "type": "quantitative"},
        "latitude": {"field": "latitude", "type": "quantitative"},
        "url": {"field": "url", "type": "nominal"},
        "tooltip": [
          {
            "field": "fact",
            "type": "nominal",
            "title": " "
          }
        ]
      },
      "data": {
        "values": [
          {
            "country": "France",
            "latitude": 46.603354,
            "longitude": 1.888334,
            "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/icons/location-pin.png",
            "fact": "The Mont-Saint-Michel is a tidal island with an impressive abbey on top. 🌊🏰 Depending on the tide, it either stands as an island or becomes connected to the mainland, creating an enchanting view. Legend has it that it has been a place of pilgrimage for over 1,300 years!"
          },
          {
            "country": "Egypt",
            "latitude": 26.820553,
            "longitude": 30.802498,
            "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/icons/location-pin.png",
            "fact": "The Pyramids of Giza 🏺, inscribed as a UNESCO World Heritage Site in 1979, are the only surviving Ancient Wonder of the World. Built more than 4,500 years ago, these monumental tombs have fascinated historians and tourists alike for centuries. 📜🧭"
          },
          {
            "country": "Australia",
            "latitude": -25.274398,
            "longitude": 133.775136,
            "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/icons/location-pin.png",
            "fact": "The Great Barrier Reef 🐠 is the largest coral reef system on Earth, stretching over 2,300 kilometers. It is home to thousands of marine species, including sea turtles 🐢, sharks 🦈, and vibrant coral gardens."
          },
          {
            "country": "United States",
            "latitude": 37.09024,
            "longitude": -95.712891,
            "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/icons/location-pin.png",
            "fact": "Yellowstone National Park became a heritage site in 1978 and stands as a global symbol of nature conservation with its breathtaking geysers, bison herds, and grizzly bears 🌲🌍."
          },
          {
            "country": "Brazil",
            "latitude": -14.235004,
            "longitude": -51.92528,
            "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/icons/location-pin.png",
            "fact": "Brazil's Amazon Rainforest is one of the largest protected areas on Earth. Home to an incredible array of wildlife, including pink river dolphins 🐬 and jaguars 🐆, it plays a crucial role in balancing the world’s climate and oxygen levels."
          },
          {
            "country": "China",
            "latitude": 35.86166,
            "longitude": 104.195397,
            "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/icons/location-pin.png",
            "fact": "The Great Wall 🧱 spans over 21,000 kilometers and took more than 2,000 years to complete. 🏯🛡️ Originally built for defense, it now symbolizes China’s strength and endurance, attracting millions of visitors each year."
          },
          {
            "country": "India",
            "latitude": 20.593684,
            "longitude": 78.96288,
            "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/icons/location-pin.png",
            "fact": "The Taj Mahal 🕌 was built by Emperor Shah Jahan in memory of his beloved wife Mumtaz Mahal. The stunning white marble mausoleum, which changes color depending on the time of day, attracts millions of visitors each year as a global symbol of love."
          },
          {
            "country": "Malaysia",
            "latitude": 7.210484,
            "longitude": 112.975766,
            "url": "https://raw.githubusercontent.com/nishagayathri9/Heritage_Sites/main/icons/location-pin.png",
            "fact": "The Gunung Mulu National Park 🏞️, inscribed in 2000, is renowned for its karst formations, vast caves, and the world's largest cave chamber."
          }
        ]
      }
    }
  ]
}
